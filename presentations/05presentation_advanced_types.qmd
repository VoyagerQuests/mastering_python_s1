---
title: "Behavioral and Generic Typing"
format:
  revealjs:
    width: 1600
    height: 1200
    margin: 0.1
    css: styles.css
    transition: slide
    transition-speed: fast
    execute:
      echo: true
      ansi: false
      error: true
theme: dark
---
```{python}
#| include: false
%xmode Plain
```
## {auto-animate=true}

<h2 data-id="title">Callable</h2>
``` {python}
#| code-line-numbers: "1,4-6,11-12|"
#| 
from collections.abc import Callable


def apply_operation(
    value: int,
    operation: Callable[[int], int],
) -> int:
    return operation(value)


def double(x: int) -> int:
    return x * 2


def square(x: int) -> int:
    return x * x


print("Output:", apply_operation(5, double))   
print("Output:", apply_operation(5, square))   
```

## {auto-animate=true}

<h2 data-id="title">Generic Types</h2>
``` {python}
#| code-line-numbers: "1-3|6-8|11-13|16-18"
# My Example to Show Generic Type using TypeValue instead of T
def identity[TypeValue](x: TypeValue) -> TypeValue:
    return x


# Typical Convention Variable Name
def identity2[T](x: T) -> T:
    return x


# Generic Pair Example
def pair[Left, Right](a: Left, b: Right) -> tuple[Left, Right]:
    return a, b


# Domain Specific Example
def echo[Message](msg: Message) -> Message:
    return msg
```

## {auto-animate="true"}

<h2 data-id="title">Behavioral Typing with Protocols</h2>
``` {python}
#| code-line-numbers: "1|3-4|6-7|9-14|17-22|"

from typing import Protocol

class HasName(Protocol):
    def get_name(self) -> str: ...

def greet(entity: HasName) -> str:
    return f"Hello, {entity.get_name()}!"

class Team:
    def get_name(self) -> str:
        return "Alpha Squad"


print(greet(Team()))


class User:
    def get_name(self) -> str:
        return "Percy Jackson"


print(greet(User()))
```

## {auto-animate="true"}

<h2 data-id="title">Generic Protocols with Variable Types</h2>
``` {python}
from typing import Protocol


class HasName[T](Protocol):
    def get_name(self) -> T: ...


def greet[T](entity: HasName[T]) -> T:
    return entity.get_name()


class User:
    def __init__(self, name: str):
        self._name = name

    def get_name(self) -> str:
        return self._name


class Robot:
    def get_name(self) -> int:
        return 101


u = User("Alice")
r = Robot()

print(greet(u))  # inferred as str
print(greet(r))  # inferred as int
```
